@if (product()) {
<div class="bg-white rounded-lg shadow-lg overflow-hidden max-w-4xl mx-auto mt-8">
    <div class="md:flex">
        <div class="md:flex-shrink-0 md:w-1/2">
            <img [src]="product()?.images" [alt]="product()?.title" class="w-full h-full object-cover max-h-[500px]">
        </div>
        <div class="p-8 md:w-1/2 flex flex-col justify-center">
            <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">Product Details</div>
            <h2
                class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl white-space-normal">
                {{ product()?.title }}
            </h2>
            <div class="flex items-center mt-4 text-yellow-500">
                @for (star of [1,2,3,4,5]; track star) {
                <i class="fa-solid fa-star" [class.text-gray-300]="star > (product()?.rating || 0)"></i>
                }
                <span class="ml-2 text-gray-600 text-sm">({{ product()?.rating }} / 5)</span>
            </div>
            <p class="mt-4 text-xl text-gray-500">{{ product()?.description }}</p>
            <div class="mt-8 flex items-center justify-between">
                <span class="text-4xl font-bold text-gray-900">${{ product()?.price }}</span>
                <span class="text-sm" [class.text-green-600]="remainingStock() > 0"
                    [class.text-red-600]="remainingStock() === 0">
                    {{ remainingStock() > 0 ? remainingStock() + ' items in stock' : 'Out of Stock' }}
                </span>
            </div>
            <div class="mt-8 flex gap-4">
                <button (click)="addToCart(product()!)" [disabled]="isMaxReached()"
                    class="flex-1 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-indigo-700 transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed">
                    {{ isMaxReached() ? 'Out of Stock' : 'Add to Cart' }}
                </button>
                <a routerLink="/products"
                    class="flex-1 text-center border-2 border-indigo-600 text-indigo-600 font-bold py-3 px-6 rounded-lg hover:bg-indigo-50 transition duration-200">
                    Back to List
                </a>
            </div>
        </div>
    </div>
</div>
} @else {
<div class="text-center mt-12">
    <h2 class="text-2xl font-bold text-red-600">Product Not Found</h2>
    <a routerLink="/products" class="mt-4 inline-block text-blue-600 hover:underline">Back to Products</a>
</div>
}